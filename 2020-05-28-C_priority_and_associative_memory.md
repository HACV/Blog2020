---
title: C语言优先级和结合性记忆
date: 2020-05-28 19:33:03
categories: 
- 随笔
tags:
- C语言
- idea

img: /photos/2020.5.28/1.jpg
top: false
toc: true

summary: 记忆C语言的优先级和结合性真的像孔乙己记忆“回”字的四种写法一样没必要吗？
mathjax: true

cover: false
# password:

---

# C语言优先级和结合性记忆

**前述**：以前以为，记忆C语言的优先级和结合性就像孔乙己记忆“回”字的四种写法一样有些没必要，对于技术，简洁即美。但以下场景，记忆C语言的优先级结合性还是有一定好处
**场景**：
>- 记忆一些特定的优先级和结合性，能够帮助从编译器角度来快速识别多级指针和数组指针和函数指针判定指针类型。
>- 某些项目的遗留代码中有一些编程风格不好的片段，总是不写括号，遇到就需要查书，对研究别人代码，有一定影响。记忆优先级和结合性，能够降低开发中重构已有代码的难度。
>- 有的相关试题中，有考优先级的题目的存在。（考优先级不是目的，而是为了解决那些风格不好的遗留代码）
>- 由于编译器语法分析阶段的设计原理，其他语言的优先级也可以在此基础上记忆。
>>- C语言的优先级，再添加上一些C++本身的运算符，则很容易转换到记忆C++的优先级
>>- Java的运算符的优先级和C语言相似

**<center>优先级从高到低，分为15级</center>**
<img src="/photos/2020.5.28/2020_5.28_1.jpg" width="80%">
<img src="/photos/2020.5.28/2020_5.28_2.jpg" width="80%">
 
## 优先级记忆
<table><td bgcolor=#FFFF FF>
初-单-算-移-关        （出箪蒜一罐）</td></table>  
<table><td bgcolor=#FFFF FF>
位-逻-三-赋-逗        （味落三伏豆）</td></table> 

//箪—意指古代盛饭用的圆形竹器
>记忆场景：
每年三伏天农作时期，要为田间劳作者送饭，送饭者专门用箪盛着食物前往，还专门为其中一个很喜欢吃大蒜的劳作者带了一罐蒜解馋。后来，劳作者吃着发现，今年的三伏天的黄豆也格外美味。

解释：
初：初级运算符
单：单目运算符
算：算数运算符（包含2个优先级）
移：移位运算符
关：关系运算符（包含2个优先级）

位：位运算（除去，位运算中的单目运算符~ 包含3个优先级）
逻：逻辑运算符（包含2个优先级）
三：三目运算符
赋：赋值运算符
逗：逗号运算符

## 结合性记忆
<table><td bgcolor=#FFFF FF>
单三赋    从右左</td></table> 


除以上规则以外,还有一点。 
标准的C语言编译器对运算符的解析遵循“最大贪婪”规则。
## **“最大贪婪”规则** 
当C语言编译器对源程序进行词法分析时，如果运算符的下一个符号还是运算符，并且能和前一个运算符构成一个新的合法运算符时，编译器的词法分析器必须将其解析为两个运算符符号构成的新的运算符。

举一个没太大实际意义的例子来辅证，例如: x=z+++y;
是按照x=z+（++y）;来计算，还是按照x=（z++）+y;来计算呢?
根据C编译器的“最大贪婪”规则,是按照x=（z++）+y;来计算，而不是按照x=z+（++y）来计算
可以验证
```cpp
int z=3,y=5;
int x;
x=z+++y;
printf("%d\n",x);
//输出结果为8，而不是9
//考点：C编译器的“最大贪婪”规则
```

## 用法举例
* 记忆第一优先级中的和第二优先级
```cpp
int (*p)[3];    //这是一个数组指针，指向的类型是int (*)[3]
int *p[3];    //这是一个指针数组，里面的是int *类型的指针
int ** p;    //这是一个二级指针，指向的类型是int *
int (*p)(int ,int);  //这是一个函数指针，指向的类型是int (*)(int,int)
int *p(int ,int);    //这是一个返回值为指针的函数
```

* 比格基地笔试题
```cpp
//以下程序的k最终值是：
int i = 10;
int j = 20;
int k = 3;
k *= i + j;
//答:90
//解释  =是赋值运算符 *=是赋值运算符  +是算数运算符 
//“出箪蒜一罐,味落三伏豆”知，算数运算符优先级高，先算i+j
//考点：编程语言的优先级
```

* 360公司笔试题
```cpp
#include <stdio.h>
int main()
{ 
	int i, j, m=6,n=4,  *p=&n, *q=&m;
	//“出箪蒜一罐,味落三伏豆”知,关系运算符==的优先级比赋值运算符=高，知i=0
	i=p==&m;	
	//(-*p)中，-和*都是单目运算符，结合性是“单三赋，从右左”，所以，相当于(-n)
	j=(-*p)/(*q)+7;
	printf("i=%d,j=%d\n", i,j);
	return 0;
}
//输出为 i=0,j=7
//考点：编程语言的优先级,结合性
```
