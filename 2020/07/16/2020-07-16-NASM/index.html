<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="NASM汇编（32位为例）, HACV">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>NASM汇编（32位为例） | HACV</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 4.2.1"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">HACV</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/Tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>文章分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>文章发布时间线</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于我</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">HACV</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/Tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			文章分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			文章发布时间线
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于我
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/HACV" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/HACV" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/photos/2020.6.03_15/2020_06_06_cover.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">NASM汇编（32位为例）</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/Tags/%E6%B1%87%E7%BC%96-Assembly/">
                                <span class="chip bg-color">汇编( Assembly)</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" class="post-category">
                                计算机组成原理
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2020-07-16
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>Word Count:&nbsp;&nbsp;
                    2k
                </div>
                

                

                
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="NASM编译器常用指令（32位汇编为例）"><a href="#NASM编译器常用指令（32位汇编为例）" class="headerlink" title="NASM编译器常用指令（32位汇编为例）"></a>NASM编译器常用指令（32位汇编为例）</h1><p><font style="background: yellow" size="5">结合X86寄存器理解</font></p>
<p><code>NASM用的是intel汇编语法，和Linux反汇编的有区别</code></p>
<h2 id="一、通用汇编指令"><a href="#一、通用汇编指令" class="headerlink" title="一、通用汇编指令"></a>一、通用汇编指令</h2><h3 id="★0）分类"><a href="#★0）分类" class="headerlink" title="★0）分类"></a>★0）分类</h3><p>汇编指令通常可以分为数据传送指令，算术和逻辑预算指令，控制流指令</p>
<p><code>PS：我们的操作数是:寄存器，立即数，内存</code></p>
<h3 id="★1）数据传送指令"><a href="#★1）数据传送指令" class="headerlink" title="★1）数据传送指令"></a>★1）数据传送指令</h3><blockquote>
<ul>
<li>1）mov 目标操作数,源操作数<blockquote>
<ul>
<li><code>mov 寄存器,寄存器</code></li>
<li><code>mov 寄存器,立即数</code></li>
<li><code>mov 寄存器,内存</code></li>
<li><code>mov 内存,寄存器</code></li>
<li><code>mov 内存,立即数</code></li>
<li><font style="background: yellow">mov 内存直接到内存是不准的！！！</font></li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<pre class=" language-asm"><code class="language-asm">mov byte ptr[var],5
mov eax,ebx</code></pre>
<blockquote>
<ul>
<li>2）push 操作数<blockquote>
<ul>
<li><code>push 寄存器</code>（注意要</li>
<li><code>push 内存</code></li>
<li><code>push 立即数</code></li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<pre class=" language-asm"><code class="language-asm">push eax</code></pre>
<blockquote>
<ul>
<li>3）pop 操作数</li>
</ul>
</blockquote>
<h3 id="★2）算术和逻辑运算指令"><a href="#★2）算术和逻辑运算指令" class="headerlink" title="★2）算术和逻辑运算指令"></a>★2）算术和逻辑运算指令</h3><blockquote>
<ul>
<li>1）加、减（add / <strong>sub</strong>tract，v.减去）<blockquote>
<ul>
<li><code>add/sub 目标操作数,被加/减的数字</code></li>
<li><code>add/sub 寄存器,寄存器</code></li>
<li><code>add/sub 寄存器,立即数</code></li>
<li><code>add/sub 寄存器,内存</code></li>
<li><code>add/sub 内存,寄存器</code></li>
<li><code>add/sub 内存,立即数</code></li>
<li><font style="background: yellow">add/sub 内存,内存是不准的！！！</font></li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<pre class=" language-asm"><code class="language-asm">sub eax,10        
;假设eax是变量，用C语言解释就是eax=eax-10</code></pre>
<blockquote>
<ul>
<li>2）<code>带符号</code>乘法（<strong>mul</strong>tiplication,n.乘法）</li>
<li>格式1）imul 目标操作数,操作数<blockquote>
<ul>
<li>imul 寄存器,寄存器</li>
<li>imul 寄存器,内存</li>
<li><font style="background: yellow">Tips：只能是上面的，目标操作只能是寄存器</font></li>
</ul>
</blockquote>
</li>
<li>格式2）imul 目标操作数,操作数1,操作数2<blockquote>
<ul>
<li>imul 寄存器,寄存器,立即数</li>
<li>imul 寄存器,内存,立即数</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<pre class=" language-asm"><code class="language-asm">;假设eax，edi是变量，用C语言解释就是eax=eax*edi
imul eax,edi
;假设eax，edi是变量，用C语言解释就是eax=edi*5
imul eax,edi,5</code></pre>
<blockquote>
<ul>
<li>3)<code>带符号</code>除法（division,n.除法）</li>
<li>idiv 除数操作数<blockquote>
<ul>
<li>idiv 寄存器</li>
<li>idiv 内存<blockquote>
<ul>
<li><font style="background: yellow">被除数在<code>edx:eax</code>中，此外，操作结果，<code>商送到eax</code>,<code>余数送到edx</code></font></li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<pre class=" language-asm"><code class="language-asm">idiv ebx
idiv dword ptr [var]</code></pre>
<blockquote>
<ul>
<li>4）自加和自减（<strong>inc</strong>rease,v.增加 / <strong>dec</strong>rease,v.减少）<blockquote>
<ul>
<li>inc/dec 操作数</li>
<li>inc/dec 寄存器</li>
<li>inc/dec 内存</li>
<li><font style="background: yellow">inc/dec 立即数显然是不准！！！</font><blockquote>
<ul>
<li>这就是C语言中<code>i++,--i</code>的汇编实现</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>5）取负（<strong>neg</strong>ative，v.否定，adj.负面的）<blockquote>
<ul>
<li>neg 操作数</li>
<li>neg 寄存器</li>
<li>neg 内存</li>
<li><font style="background: yellow">neg  立即数    显然是不准！！！</font></li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<pre class=" language-asm"><code class="language-asm">neg eax</code></pre>
<p><font style="background: red" size="5">位运算大类指令</font></p>
<blockquote>
<ul>
<li>6）按位取反（位翻转）指令（not）<blockquote>
<ul>
<li>not 操作数</li>
<li><code>not 寄存器</code></li>
<li><code>not 内存</code></li>
<li><font style="background: yellow">not  立即数    显然是不准！！！</font></li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<pre class=" language-asm"><code class="language-asm">not byte ptr [var]</code></pre>
<blockquote>
<ul>
<li>7）<font style="background: yellow">逻辑</font>移位指令（<strong>sh</strong>ift v.移动，转移）<blockquote>
<ul>
<li>shl/shr（left，逻辑左移/right，逻辑右移）</li>
<li>shl/shr 被操作数,移位的位数的操作数</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<pre class=" language-asm"><code class="language-asm">shl eax,1
shr ebx,2  </code></pre>
<blockquote>
<ul>
<li>8）<font style="background: yellow">算术</font>移位指令（<strong>sh</strong>ift v.移动，转移）<br>（arithmetic，n.算术，算术运算）</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>9）逻辑与，或，异或（and/or/xor）<blockquote>
</blockquote>
</li>
</ul>
</blockquote>
<pre class=" language-asm"><code class="language-asm">and eax,0fH
or eax,0fH
xor edx,edx</code></pre>
<h3 id="★3）控制流指令"><a href="#★3）控制流指令" class="headerlink" title="★3）控制流指令"></a>★3）控制流指令</h3><blockquote>
<ul>
<li>1）循环(loop)（可以说是C语言中循环的汇编语言实现）<blockquote>
<ul>
<li>loop 地址<blockquote>
<ul>
<li>loop指令，在执行的时候，会顺序做两件事：（1）寄存器cx减一  （2）如果cx的内容不为0，则转移到指定的位置去执行，否则顺序执行后面的指令。</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<pre class=" language-asm"><code class="language-asm">mov cx,5 ;循环次数
mov si,10 ;除数
digit:
     xor dx,dx
     div si
     mov [bx],dl ;保存数位
     inc bx
     loop digit</code></pre>
<blockquote>
<ul>
<li>2）跳转（jump)（可以说是C语言中goto的汇编语言实现）<blockquote>
<ul>
<li>jmp 标签所在地址</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<pre class=" language-.asm"><code class="language-.asm">begin: 
add eax,1
jmp begin</code></pre>
<blockquote>
<ul>
<li>3）比较和转移（可以说是C语言条件语句的汇编语言实现）<blockquote>
<ul>
<li>指令（1）cmp 操作数,操作数<blockquote>
<ul>
<li>cmp 寄存器,寄存器</li>
<li>cmp 寄存器,立即数</li>
<li>cmp 寄存器,内存</li>
<li>cmp 内存,寄存器<blockquote>
<ul>
<li>比较两个操作数的值，并且根据结果，设置eflags寄存器中的条件码</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</li>
<li>指令（2）j开头的转移指令</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th>语法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>je 标签</td>
<td>jump when  <strong>equal</strong></td>
</tr>
<tr>
<td>jne 标签</td>
<td>jump when <strong>not equal</strong></td>
</tr>
<tr>
<td>jz 标签</td>
<td>jump when <strong>last reult was zero</strong></td>
</tr>
<tr>
<td>jg 标签</td>
<td>jump when <strong>greater than</strong></td>
</tr>
<tr>
<td>jge 标签</td>
<td>jump when <strong>greater than or equal to</strong></td>
</tr>
<tr>
<td>jl 标签</td>
<td>jump when <strong>less than</strong></td>
</tr>
<tr>
<td>jle 标签</td>
<td>jump when <strong>less than or equal to</strong></td>
</tr>
</tbody></table>
<blockquote>
<ul>
<li>代码样例</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<pre class=" language-.asm"><code class="language-.asm">begin:
    inc ebx
    cmp eax,ebx        ;比较
    jge begin        ;当eax>=ebx的时候，就跳转到begin</code></pre>
<blockquote>
<ul>
<li>4）子程序调用（C语言中函数调用的汇编实现，也解释了为什么我们自己模拟的栈比C语言自身的栈消耗资源更少）</li>
<li>指令1）函数调用（call）</li>
<li>指令2）函数返回（ret）<blockquote>
<ul>
<li>call指令：(语法: call 标签)<br>首先：将<code>当前执行指令</code>的<code>地址</code>入栈<br>然后：无条件转移到由标签指示的地址的指令<br>Tips：和简单的跳转指令（jmp）不同，call指令保存调用之前的地址信息</li>
<li>ret指令:(语法:  ret)<br>实现子程序的返回机制<br>ret指令首先：弹出栈中保存的指令地址<br>然后：无条件转移到保存的指令地址处执行</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<blockquote>
<blockquote>
<ul>
<li>用一个C语言反汇编说明（测试环境VS2012反汇编）</li>
</ul>
</blockquote>
</blockquote>
<pre class=" language-asm"><code class="language-asm">省略——————
int test(int a,int b)
{
00D41460  push        ebp  
00D41461  mov         ebp,esp  
00D41463  sub         esp,0C0h  
00D41469  push        ebx  
00D4146A  push        esi  
00D4146B  push        edi  
00D4146C  lea         edi,[ebp-0C0h]  
00D41472  mov         ecx,30h  
00D41477  mov         eax,0CCCCCCCCh  
00D4147C  rep stos    dword ptr es:[edi]  
    return a+b;
00D4147E  mov         eax,dword ptr [a]  
00D41481  add         eax,dword ptr [b]  
}
00D41484  pop         edi  
00D41485  pop         esi  
00D41486  pop         ebx  
00D41487  mov         esp,ebp  
00D41489  pop         ebp  
00D4148A  ret              ;调用返回
省略------------
    int a=3;
00D413EE  mov         dword ptr [a],3  
    int b=7;
00D413F5  mov         dword ptr [b],7  
    int c=test(a,b);
00D413FC  mov         eax,dword ptr [b]  
00D413FF  push        eax  
00D41400  mov         ecx,dword ptr [a]  
00D41403  push        ecx  
00D41404  call        _test (0D4114Ah)  ;_test是函数的符号表，编译原理中讲过。此次调用test函数
00D41409  add         esp,8  
00D4140C  mov         dword ptr [c],eax  
省略------------</code></pre>
<h3 id="★4）其他指令"><a href="#★4）其他指令" class="headerlink" title="★4）其他指令"></a>★4）其他指令</h3><blockquote>
<ul>
<li>cld指令（clear Direction Flag）<br>无操作数指令。<br>将标志寄存器（flags）的DF（Direction Flag，方向标志位）置0<br>0表示，movsb或者movsw等指令的传送方向是正向的（从低地址到高地址）</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>std指令（set Direction Flag）<br>无操作数指令。<br>将标志寄存器（flags）的DF（Direction Flag，方向标志位）置0<br>1表示，movsb或者movsw等指令的传送方向是反向的（从高地址到低地址）</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>movsb（move string byte)<br>无操作数指令。<br>把数据从一个地方批量传送（复制）到另一个地方，是以byte为单位</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>movsw（move string word)<br>无操作数指令。<br>把数据从一个地方批量传送（复制）到另一个地方，是以word（字）为单位</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>movsb和movsw要是只写他，而不加rep，则它们只能执行一次<br>如果想要处理器自动的反复执行，那么要加上指令前缀rep(repeat)<br>意思是cx（count Register）不为0则反复执行，</li>
</ul>
</blockquote>
<pre class=" language-asm"><code class="language-asm">rep mobsw</code></pre>
<h2 id="二、NASM编译指令"><a href="#二、NASM编译指令" class="headerlink" title="二、NASM编译指令"></a>二、NASM编译指令</h2><p>也就是我们所说的伪指令，不是CPU的指令<br>1）db/dw声明一些数据<br>用伪指令db声明的数据都只有一个字节的长度<br>用伪指令db声明的数据都只有一个字的长度</p>
<pre class=" language-.asm"><code class="language-.asm">db -1    ;初始化为0xFF
dw -1    ;初始化为0xFFFF</code></pre>
<p>2）times 是一个比较实用伪指令，用来重复定义数据或指令。</p>
<pre class=" language-asm"><code class="language-asm">times 510-($-$$) db 0
dw 0xaa55    
;这段代码经常出现在 boot 磁盘 MBR 引导代码中
;目的是除了最后 2 个字节和 code 代码外的区域全部写 0 值</code></pre>
<p>times 还可以使用在重复写某一条指令</p>
<pre class=" language-asm"><code class="language-asm">times 10 nop</code></pre>
<pre class=" language-txt"><code class="language-txt">这段代码结果是重复填入了 10 条 nop 指令：

00000000  90                nop
00000001  90                nop
00000002  90                nop
00000003  90                nop
00000004  90                nop
00000005  90                nop
00000006  90                nop
00000007  90                nop
00000008  90                nop
00000009  90                nop</code></pre>
<h2 id="三、CPU寄存器分类"><a href="#三、CPU寄存器分类" class="headerlink" title="三、CPU寄存器分类"></a>三、CPU寄存器分类</h2><p>CPU中寄存器大致分为两类</p>
<h3 id="1）用户可见："><a href="#1）用户可见：" class="headerlink" title="1）用户可见："></a>1）用户可见：</h3><p><code>可以对这类寄存器编程</code><br>eg.<br>通用寄存器组<br>程序状态字寄存器</p>
<h3 id="2）用户不可见："><a href="#2）用户不可见：" class="headerlink" title="2）用户不可见："></a>2）用户不可见：</h3><p><code>不可以对这类寄存器编程</code><br>eg.<br>存储器地址寄存器（MAR）<br>存储器数据寄存器（MDR）<br>指令寄存器（IR）</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">HACV</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://github.com/HACV/HACV.github.io/2020/07/16/2020-07-16-NASM/">https://github.com/HACV/HACV.github.io/2020/07/16/2020-07-16-NASM/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint polocy. If reproduced, please indicate source
                    <a href="/about" target="_blank">HACV</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/Tags/%E6%B1%87%E7%BC%96-Assembly/">
                                    <span class="chip bg-color">汇编( Assembly)</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="qq,qzone,wechat,weibo,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你要请我喝咖啡吗？</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2020/07/17/2020-07-17-POSIX/">
                    <div class="card-image">
                        
                        <img src="/photos/2020.6.03_15/2020_06_07_cover.jpg" class="responsive-img" alt="POSIX和Linux头文件">
                        
                        <span class="card-title">POSIX和Linux头文件</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            POSIX概述和Linux常用头文件
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-07-17
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="post-category">
                                    操作系统
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/Tags/Linux/">
                        <span class="chip bg-color">Linux</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/07/16/2020-07-16-Manacher/">
                    <div class="card-image">
                        
                        <img src="/photos/2020.6.03_15/2020_06_05_cover.jpg" class="responsive-img" alt="马拉车算法">
                        
                        <span class="card-title">马拉车算法</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            一种求最长回文串的线性算法
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-07-16
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E7%AE%97%E6%B3%95/" class="post-category">
                                    算法
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/Tags/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%AE%97%E6%B3%95/">
                        <span class="chip bg-color">字符串算法</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\(', '\)']]}
    });
</script>



    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2019</span>

            <a href="/about" target="_blank">HACV</a>

            
            
            <br>
            &nbsp;欢迎来到我的个人博客♪（＾∀＾●）ﾉ♪&nbsp;

            <br>

            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">67.1k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            


            


            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/HACV" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:w.h.jack@foxmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













</div>
    </div>
</footer>

<div class="progress-bar"></div>

<meta name="baidu-site-verification" content="eL1tZnpwlW" />
 <!--这一行是推送给百度的———————————————2020.07.02-->

    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/search.xml", 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

    <!--单击显示文字//是我2020.06.05添加的星星坠落鼠标特效-->
    <!--不好用特效<script src="/js/cursor.js"></script>//是我2020.06.05添加的星星坠落鼠标特效-->
    <!--单击显示文字//是我2020.06.05添加的自由本地特效-->
    <script type="text/javascript" src="/js/click_show_text.js"></script>

</body>

</html>

